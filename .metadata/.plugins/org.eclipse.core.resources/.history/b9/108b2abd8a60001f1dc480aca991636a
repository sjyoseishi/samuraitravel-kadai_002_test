<!DOCTYPE html>
 <html xmlns:th="https://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
     <head>
         <div th:replace="~{fragment :: meta}"></div>

         <div th:replace="~{fragment :: styles}"></div>

         <!-- Flatpickr -->
         <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

         <title>民宿詳細</title>
     </head>
     <body>
         <div class="samuraitravel-wrapper">
             <!-- ヘッダー -->
             <div th:replace="~{fragment :: header}"></div>

             <main>
                 <div class="container pt-4 pb-5 samuraitravel-container">
                     <div class="row justify-content-center">
                         <div class="col-xxl-9 col-xl-10 col-lg-11">
                             <nav class="mb-4" style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
                                 <ol class="breadcrumb mb-0">
                                     <li class="breadcrumb-item"><a th:href="@{/}">ホーム</a></li>
                                     <li class="breadcrumb-item"><a th:href="@{/houses}">民宿一覧</a></li>
                                     <li class="breadcrumb-item"><a th:href="@{/houses/__${house.getId()}__}">民宿詳細</li>
                                     <li class="breadcrumb-item active" aria-current="page">民宿一覧</a></li>
                                 </ol>
                             </nav>
                             <div class="container">
                                 <div class="row">
                                     <div sec:authorize="isAuthenticated()" class="col-lg-4 px-0 ps-lg-4 mb-4">
                                         <div class="card">
                                             <div class="card-body">
                                                 <form method="get" th:action="@{/houses/__${house.getId()}__/reservations/input}" th:object="${reservationInputForm}">
                                                     <div class="form-group mb-2">
                                                         <label for="fromCheckinDateToCheckoutDate" class="col-form-label text-md-left fw-bold">チェックイン・チェックアウト</label>
                                                         <div th:if="${#fields.hasErrors('fromCheckinDateToCheckoutDate')}" class="text-danger small mb-2" th:errors="*{fromCheckinDateToCheckoutDate}"></div>
                                                         <input type="text" class="form-control" th:field="*{fromCheckinDateToCheckoutDate}">
                                                     </div>

                                                     <div class="form-group mb-4">
                                                         <label for="numberOfPeople" class="col-form-label text-md-left fw-bold">宿泊人数</label>
                                                         <div th:if="${#fields.hasErrors('numberOfPeople')}" class="text-danger small mb-2" th:errors="*{numberOfPeople}"></div>
                                                         <input type="number" class="form-control" th:field="*{numberOfPeople}" min="1">
                                                     </div>

                                                     <div class="form-group">
                                                         <button type="submit" class="btn text-white shadow-sm w-100 samuraitravel-btn">予約する</button>
                                                     </div>
                                                 </form>
                                             </div>
                                         </div>
                                     </div>
                                     <!--レビュー-->
                                     <div class="text-center">
                                     	<h1>レビュー</h1>
									 </div>

								 	<div class="text-center" sec:authorize="isAuthenticated()">
										<a class="btn text-white shadow-sm w-50 samuraitravel-btn">レビューを投稿する</a>
									</div>

									<div class="container p-3 ">
										<div class="row">
											<div class="col-6 pb-3" th:each="review : ${reviewPage}">
												<div class="card">
													<div class="card-body">
													   <div class="box">
													     <div class="item">
														   <h3 class="card-title mb-3"	th:text="${review.getUser().getName()}"></h3>
														 </div>
														 <div class="item" sec:authorize="isAuthenticated()">
															<a class="text-right">編集</a>
															<a class="samuraitravel-link-danger">削除</a>
														 </div>
													   </div>
														 <p class="card-text mb-2"><small class="text-muted"	th:text="${review.getCreatedAt()}"></small></p>
														 <p class="card-text color-1">
																<span th:if="${review.getStar()=='1'}">&#9733;&#9734;&#9734;&#9734;&#9734;</span>
																<span th:if="${review.getStar()=='2'}">&#9733;&#9733;&#9734;&#9734;&#9734;</span>
																<span th:if="${review.getStar()=='3'}">&#9733;&#9733;&#9733;&#9734;&#9734;</span>
																<span th:if="${review.getStar()=='4'}">&#9733;&#9733;&#9733;&#9733;&#9734;</span>
																<span th:if="${review.getStar()=='5'}">&#9733;&#9733;&#9733;&#9733;&#9733;</span>
														 </p>
														 <p class="card-text">
														   <h8 class="card-text mb-3" th:text="${review.getReview()}"></h8>
														</p>
													</div>
												</div>
											</div>
										</div>
									</div>
									<div class="text-center">
										<a th:href="@{/houses/__${house.getId()}__/review/reviews}">すべてのレビューを見る</a>
									</div>
                                 </div>
                             </div>
                         </div>
                     </div>
                 </div>
             </main>

             <!-- フッター -->
             <div th:replace="~{fragment :: footer}"></div>
         </div>

         <div th:replace="~{fragment :: scripts}"></div>

         <!-- Flatpickr -->
         <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
         <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ja.js"></script>
         <script th:src="@{/js/flatpickr.js}"></script>
   </body>
 </html>